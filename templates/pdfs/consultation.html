<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Consultation</title>

  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 12px;
      color: #000;
    }

    .header {
      display: flex;
      align-items: center;
      border-bottom: 2px solid #000;
      padding-bottom: 10px;
      margin-bottom: 15px;
    }

    .logo {
      width: 80px;
      height: 80px;
      margin-right: 15px;
    }

    .hospital-info h2 {
      margin: 0;
      font-size: 18px;
    }

    .hospital-info p {
      margin: 2px 0;
      font-size: 12px;
    }

    .section {
      margin-bottom: 15px;
    }

    .section-title {
      font-weight: bold;
      margin-bottom: 5px;
      border-bottom: 1px solid #000;
      padding-bottom: 3px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 5px;
    }

    table th,
    table td {
      border: 1px solid #000;
      padding: 5px;
      text-align: left;
      font-size: 11px;
    }

    table th {
      background-color: #f0f0f0;
    }

    .footer {
      margin-top: 30px;
      border-top: 1px solid #000;
      padding-top: 8px;
      font-size: 11px;
      text-align: center;
    }

    .signature {
      margin-top: 30px;
      text-align: right;
      font-size: 12px;
    }
  </style>
</head>

<body>

  <!-- HEADER -->
  <div class="header">
    {% if hospital.logo_url %}
      <img src="{{ hospital.logo_url }}" class="logo">
    {% endif %}

    <div class="hospital-info">
      <h2>{{ hospital.name }}</h2>
      {% if hospital.address %}
        <p>{{ hospital.address }}</p>
      {% endif %}
      {% if hospital.phone %}
        <p>Phone: {{ hospital.phone }}</p>
      {% endif %}
    </div>
  </div>

  <!-- PATIENT INFO -->
  <div class="section">
    <div class="section-title">Patient Details</div>
    <p>
      <strong>Name:</strong> {{ patient.full_name }}<br>
      <strong>Age:</strong> {{ patient.age|default:"-" }} &nbsp;
      <strong>Gender:</strong> {{ patient.gender|default:"-" }}<br>
      <strong>Phone:</strong> {{ patient.phone|default:"-" }}
    </p>
  </div>

  <!-- VISIT INFO -->
  <div class="section">
    <div class="section-title">Visit Details</div>
    <p>
      <strong>Date:</strong> {{ visit.visit_date|date:"d-m-Y H:i" }}<br>
      <strong>Doctor:</strong> {{ doctor.name }}<br>
      <strong>Validity:</strong> {{ visit.validity_days }} days
    </p>
  </div>

  <!-- MEDICINES -->
  <div class="section">
    <div class="section-title">Prescription</div>

    {% if medicines %}
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Medicine</th>
            <th>Dosage</th>
            <th>Frequency</th>
            <th>Duration</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for m in medicines %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ m.name }}</td>
              <td>{{ m.dosage }}</td>
              <td>{{ m.frequency }}</td>
              <td>{{ m.duration }}</td>
              <td>{{ m.status }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No medicines prescribed.</p>
    {% endif %}
  </div>

  <!-- SIGNATURE -->
  <div class="signature">
    <p>__________________________</p>
    <p>Dr. {{ doctor.name }}</p>
  </div>

  <!-- FOOTER -->
  {% if hospital.footer_note %}
    <div class="footer">
      {{ hospital.footer_note }}
    </div>
  {% endif %}

</body>
</html>
