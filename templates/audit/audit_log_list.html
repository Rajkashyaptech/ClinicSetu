{% extends "base/base.html" %}
{% block content %}

<h4>Audit Logs</h4>

<p class="text-muted">
  Read-only system activity log. Latest actions shown first.
</p>

<table class="table table-sm table-bordered">
  <thead>
    <tr>
      <th>Time</th>
      <th>Actor</th>
      <th>Action</th>
      <th>Entity</th>
      <th>Entity ID</th>
      <th>Details</th>
    </tr>
  </thead>
  <tbody>
    {% for log in logs %}
      <tr>
        <td>{{ log.created_at|date:"Y-m-d H:i:s" }}</td>
        <td>
          {% if log.actor %}
            {{ log.actor.username }} ({{ log.actor.role }})
          {% else %}
            System
          {% endif %}
        </td>
        <td>{{ log.action }}</td>
        <td>{{ log.entity }}</td>
        <td>{{ log.entity_id }}</td>
        <td>
          {% if log.metadata %}
            <pre class="mb-0">{{ log.metadata }}</pre>
          {% else %}
            â€”
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="6" class="text-center text-muted">
          No audit logs found
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
